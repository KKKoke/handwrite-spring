## 核心设计

按照目前实现的 Spring 框架，是可以满足一个基本需求的，但如果配置了 A、B 两个 Bean 对象互相依赖，那么立马会抛出 java.lang.StackOverflowError。这是因为 A 创建时需要依赖 B 创建，而 B 的创建又依赖于 A 创建，就这样死循环了。这就是 Spring 中非常经典的循环依赖问题。

循环依赖主要分为三种，自身依赖于自身、互相循环依赖、多组循环依赖。

但无论循环依赖的数量有多少，循环依赖的本质是一样的。就是你的完整创建依赖于我，而我的完整创建也依赖于你，但我们互相没法解耦，最终导致依赖创建失

败。所以需要 Spring 提供了除了构造函数注入和原型注入外的，setter 循环依赖注入解决方案。

按照 Spring 框架的设计，用于解决循环依赖需要用到三个缓存，这三个缓存分别存放了成品对象、半成品对象（未填充属性值）、代理对象，分阶段存放对象内

容，来解决循环依赖问题。